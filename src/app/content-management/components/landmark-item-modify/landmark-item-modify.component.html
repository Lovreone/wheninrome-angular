<!-- TODO: Clean-up unnecessary comments when finished -->
<!-- Pure CSS Loader https://loading.io/css/ -->
<div *ngIf="isLoading" class="lds-default">
    <div></div><div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div><div></div>
</div>
<form *ngIf="!isLoading" [formGroup]="landmarkForm">

    <!-- NAME field -->
    <label for="name">Landmark name*: </label><br>
    <input type="text" id="name" required 
        formControlName="name"
        [ngClass]="{ 'field-invalid': name?.invalid && (name?.dirty || name?.touched) }"><br>

    <!-- NAME field validation messages -->
    <div *ngIf="name?.invalid && (name?.dirty || name?.touched)" class="error-message">
        <div *ngIf="name?.errors?.required">
            Landmark name is required.
        </div>
        <div *ngIf="name?.errors?.minlength">
            Landmark name must be at least {{ name?.errors?.minlength?.requiredLength }} characters long.
        </div>
    </div><br>

    <!-- SLUG field -->
    <label for="slug">Landmark slug*: </label><br>
    <input type="text" id="slug"
        formControlName="slug"
        [ngClass]="{ 'field-invalid': slug?.invalid && (slug?.dirty || slug?.touched) }"><br>

    <!-- SLUG field validation messages -->
    <div *ngIf="slug?.invalid && (slug?.dirty || slug?.touched)" class="error-message">
        <div *ngIf="slug?.errors?.required">
            Landmark slug is required.
        </div>
        <div *ngIf="slug?.errors?.minlength">
            Landmark slug must be at least {{ slug?.errors?.minlength?.requiredLength }} characters long.
        </div>
    </div><br>

    <!-- DESCRIPTION field -->
    <label for="description">Landmark description: </label><br>
    <textarea id="description" rows="3"
        formControlName="description"></textarea><br>

    <!-- ENTRANCE-FEE field -->
    <label for="entranceFee">Entrance fee*: </label><br>
    <input type="number" id="entranceFee" required
        formControlName="entranceFee"
        [ngClass]="{ 'field-invalid': entranceFee?.invalid && (entranceFee?.dirty || entranceFee?.touched) }"><br>

    <!-- ENTRANCE-FEE field validation messages -->
    <div *ngIf="entranceFee?.invalid && (entranceFee?.dirty || entranceFee?.touched)" class="error-message">
        <div *ngIf="entranceFee?.errors?.required">
            Entrance fee is required.
        </div>
        <div *ngIf="entranceFee?.errors?.min">
            Entrance fee minimum value is {{ entranceFee?.errors?.min?.min }}.
        </div>
    </div><br>

    <button (click)="saveLandmark()" [disabled]="!landmarkForm.valid">
        {{ isNew ? 'Create' : 'Modify' }}
    </button>
</form>

<div *ngIf="serverResponseMessages">
    <p>Error messages:</p>
    <ul>
        <!-- FIXME: Use class instead of style -->
        <li *ngFor="let message of serverResponseMessages" style="color:red">{{ message }}</li> 
    </ul>
</div>
